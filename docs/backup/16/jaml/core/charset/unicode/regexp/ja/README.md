# Japanese RegExp (Localizer)

日本語の文字集合に関連する、責任分離された正規表現を提供します。

## 概要

本モジュールは、Unicodeにおける日本語ローカライズ処理（ノーマライズ、サニタイズ、文字数カウント）の「部品」として機能する正規表現を定義します。

## 設計思想と技術的制約

### 1. Unicodeの技術的負債と妥協点
Unicodeの「CJK統合漢字」という仕様により、国や言語ごとに漢字を完全に分離することは技術的に不可能です。本モジュールでは以下の優先順位で要件を妥協しています。

1.  **日本で使う漢字を網羅すること**（最優先）
2.  **日本で使わない漢字を除外すること**（次点）

日本の漢字を網羅するために、結果として中国語や韓国語専用の漢字が含まれることを許容しています。逆に、日本で使う字を削ってまで他国の字を省くことは避ける方針を採用しています。

### 2. IPA文字情報基盤（MJ文字）との関係
本モジュールの漢字定義（`CJK_KANJI`）は、IPA文字情報基盤を可能な限り網羅することを目指しています。

*   **網羅性**: `\p{Script=Han}` を採用することで、統合漢字に加え、MJ文字において重要な「CJK互換漢字」をカバーしています。
*   **限界（PUA文字）**: IPA文字情報基盤に含まれる「Unicode私用領域（PUA）」の文字は、正規表現の標準プロパティでは捕捉できません。これらは技術的に対処不能であるため、本モジュールの対象外としています。

### 3. 責任分離の構造
文字種を「部品（`JA`）」と「要件（`JAML`）」に分離しています。

*   **`JA` 名前空間**: 平仮名、片仮名、踊り字、漢数字、記号など、言語学的な最小単位。
*   **`JAML` 名前空間**: ルビ親文字判定（`RUBY_PARENT_KANJI`）や正規化保護（`NFC_UNSAFE`）など、Jamlの機能要件に合わせて部品を組み合わせたもの。

## Usage

```javascript
import { JapaneseRegExp } from './dist/main.js';

// 日本語の平仮名判定
if (JapaneseRegExp.JA.KANA.HIRA.test(char)) { ... }

// ルビ親文字（漢字＋準漢字）の判定
if (JapaneseRegExp.JAML.RUBY_PARENT_KANJI.test(text)) { ... }
```

## 注意事項
*   全ての正規表現は `u` (Unicode) フラグを前提としています。
*   `CJK_KANJI` には、技術的制約により「部首」や「漢字構成記述文字」が含まれています（一部採用の状態）。これらを厳密に排除したい場合は、`JA.KANJI.STRUCTURE` を用いた個別のサニタイズを検討してください。

